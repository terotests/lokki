(function(){var t={},n=function(){var n=function(){!function(t){var n,i,e,o,r;t.add=function(t,n,e){if(n||e){var o;"[object Array]"===Object.prototype.toString.call(e)?o=e:(o=Array.prototype.slice.call(arguments,2),o||(o=[])),i.push([n,t,o])}else i.push(t)},t.after=function(t,n,i){i||(i="time"+(new Date).getTime()+Math.random(1e7)),o[i]={step:Math.floor(1e3*t),fn:n,nextTime:0,remove:!0}},t.asap=function(t){this.add(t)},t.every=function(t,n,i){i||(i="time"+(new Date).getTime()+Math.random(1e7)),o[i]={step:Math.floor(1e3*t),fn:n,nextTime:0}},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){if(!n){this.polyfill();var t,a;if("undefined"!=typeof window){var t=window.requestAnimationFrame,a=window.cancelRequestAnimationFrame;["","ms","moz","webkit","o"].forEach(function(n){t||(t=window[n+"RequestAnimationFrame"],a=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"])})}t||(t=function(t){return setTimeout(t,16)}),a||(a=function(t){clearTimeout(t)}),i=[],e={},o={},r=[];var l=0,f=function(){for(var n,a=(new Date).getTime();n=i.shift();)"[object Array]"===Object.prototype.toString.call(n)?n[1].apply(n[0],n[2]):n();for(var s=0;s<r.length;s++){var c=r[s];c()}for(var u in e)if(e.hasOwnProperty(u)){var _=e[u];_[0](_[1]),delete e[u]}for(var u in o)if(o.hasOwnProperty(u)){var _=o[u];_.nextTime<a&&(_.remove?_.nextTime>0?(_.fn(),delete o[u]):_.nextTime=a+_.step:(_.fn(),_.nextTime=a+_.step)),_.until&&_.until<a&&delete o[u]}t(f),l=a};f(),n=!0}}),t.once=function(t,n,i){e[t]=[n,i]},t.onFrame=function(t){r.push(t)},t.polyfill=function(){},t.removeFrameFn=function(t){var n=r.indexOf(t);return n>=0?(t._onRemove&&t._onRemove(),r.splice(n,1),!0):!1}}(this)},i=function(t,n,e,o,r,a,l,f){var s,c=this;if(!(c instanceof i))return new i(t,n,e,o,r,a,l,f);var u=[t,n,e,o,r,a,l,f];if(c.__factoryClass)if(c.__factoryClass.forEach(function(t){s=t.apply(c,u)}),"function"==typeof s){if(s._classInfo.name!=i._classInfo.name)return new s(t,n,e,o,r,a,l,f)}else if(s)return s;c.__traitInit?c.__traitInit.forEach(function(t){t.apply(c,u)}):"function"==typeof c.init&&c.init.apply(c,u)};i._classInfo={name:"later"},i.prototype=new n;var e=function(){!function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return t instanceof Array},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return t===Object(t)}}(this),function(t){var n;t.hasOwnProperty("__factoryClass")||(t.__factoryClass=[]),t.__factoryClass.push(function(t){return t?(n||(n={}),n[t]?n[t]:void(n[t]=this)):void 0}),t.addMetrics=function(t,n){var i=this._metrics[t];i||(i=this._metrics[t]={cnt:0,min:n,max:n,total:0}),i.cnt++,i.total+=n,i.max<n&&(i.max=n),i.min>n&&(i.min=n),i.avg=i.total/i.cnt},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t){this._tag=t,this._log=[],this._metrics={};var n=this;i().every(.2,function(){0!=n._log.length&&(console.group(n._tag),n._log.forEach(function(t){1==t.length&&console.log(t[0]),2==t.length&&console.log(t[0],t[1]),3==t.length&&console.log(t[0],t[1],t[2]),4==t.length&&console.log(t[0],t[1],t[2],t[3])}),n._log.length=0,console.groupEnd())}),i().every(.2,function(){if(n._logMemoryCnt&&n._logMemoryCnt>0&&(n._logMemoryCnt--,process&&process.memoryUsage)){var t=require("util"),i=t.inspect(process.memoryUsage());n.value("rss",i.rss),n.value("heapTotal",i.heapTotal),n.value("heapUsed",i.heapUsed)}console.group("Metrics"),console.table(n._metrics,["cnt","min","max","avg"]),console.groupEnd()})}),t.log=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);this._log.push(t)},t.recordHeap=function(t){this._logMemoryCnt=t},t.value=function(t,n){this.addMetrics(t,n)}}(this)},o=function(t,n,i,e,r,a,l,f){var s,c=this;if(!(c instanceof o))return new o(t,n,i,e,r,a,l,f);var u=[t,n,i,e,r,a,l,f];if(c.__factoryClass)if(c.__factoryClass.forEach(function(t){s=t.apply(c,u)}),"function"==typeof s){if(s._classInfo.name!=o._classInfo.name)return new s(t,n,i,e,r,a,l,f)}else if(s)return s;c.__traitInit?c.__traitInit.forEach(function(t){t.apply(c,u)}):"function"==typeof c.init&&c.init.apply(c,u)};o._classInfo={name:"lokki"},o.prototype=new e,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(t.lokki=o,this.lokki=o):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.lokki=o:this.lokki=o}.call(new Function("return this")()),function(t){t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){})}(this)},i=function(t,n,e,o,r,a,l,f){var s,c=this;if(!(c instanceof i))return new i(t,n,e,o,r,a,l,f);var u=[t,n,e,o,r,a,l,f];if(c.__factoryClass)if(c.__factoryClass.forEach(function(t){s=t.apply(c,u)}),"function"==typeof s){if(s._classInfo.name!=i._classInfo.name)return new s(t,n,e,o,r,a,l,f)}else if(s)return s;c.__traitInit?c.__traitInit.forEach(function(t){t.apply(c,u)}):"function"==typeof c.init&&c.init.apply(c,u)};i._classInfo={name:"lokkiLoki"},i.prototype=new n,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(t.lokkiLoki=i,this.lokkiLoki=i):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.lokkiLoki=i:this.lokkiLoki=i}.call(new Function("return this")()),"undefined"!=typeof define&&null!==define&&null!=define.amd&&define(t)}).call(new Function("return this")());