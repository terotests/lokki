(function(){var t={},n=function(){var n=function(){!function(t){var n,e,i,o,a;t.add=function(t,n,i){if(n||i){var o;"[object Array]"===Object.prototype.toString.call(i)?o=i:(o=Array.prototype.slice.call(arguments,2),o||(o=[])),e.push([n,t,o])}else e.push(t)},t.after=function(t,n,e){e||(e="time"+(new Date).getTime()+Math.random(1e7)),o[e]={step:Math.floor(1e3*t),fn:n,nextTime:0,remove:!0}},t.asap=function(t){this.add(t)},t.every=function(t,n,e){e||(e="time"+(new Date).getTime()+Math.random(1e7)),o[e]={step:Math.floor(1e3*t),fn:n,nextTime:0}},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){if(!n){this.polyfill();var t,r;if("undefined"!=typeof window){var t=window.requestAnimationFrame,r=window.cancelRequestAnimationFrame;["","ms","moz","webkit","o"].forEach(function(n){t||(t=window[n+"RequestAnimationFrame"],r=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"])})}t||(t=function(t){return setTimeout(t,16)}),r||(r=function(t){clearTimeout(t)}),e=[],i={},o={},a=[];var l=0,s=function(){for(var n,r=(new Date).getTime();n=e.shift();)"[object Array]"===Object.prototype.toString.call(n)?n[1].apply(n[0],n[2]):n();for(var f=0;f<a.length;f++){var c=a[f];c()}for(var u in i)if(i.hasOwnProperty(u)){var _=i[u];_[0](_[1]),delete i[u]}for(var u in o)if(o.hasOwnProperty(u)){var _=o[u];_.nextTime<r&&(_.remove?_.nextTime>0?(_.fn(),delete o[u]):_.nextTime=r+_.step:(_.fn(),_.nextTime=r+_.step)),_.until&&_.until<r&&delete o[u]}t(s),l=r};s(),n=!0}}),t.once=function(t,n,e){i[t]=[n,e]},t.onFrame=function(t){a.push(t)},t.polyfill=function(){},t.removeFrameFn=function(t){var n=a.indexOf(t);return n>=0?(t._onRemove&&t._onRemove(),a.splice(n,1),!0):!1}}(this)},e=function(t,n,i,o,a,r,l,s){var f,c=this;if(!(c instanceof e))return new e(t,n,i,o,a,r,l,s);var u=[t,n,i,o,a,r,l,s];if(c.__factoryClass)if(c.__factoryClass.forEach(function(t){f=t.apply(c,u)}),"function"==typeof f){if(f._classInfo.name!=e._classInfo.name)return new f(t,n,i,o,a,r,l,s)}else if(f)return f;c.__traitInit?c.__traitInit.forEach(function(t){t.apply(c,u)}):"function"==typeof c.init&&c.init.apply(c,u)};e._classInfo={name:"later"},e.prototype=new n;var i=function(){!function(t){t.guid=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.isArray=function(t){return t instanceof Array},t.isFunction=function(t){return"[object Function]"==Object.prototype.toString.call(t)},t.isObject=function(t){return t===Object(t)}}(this),function(t){var n;t.hasOwnProperty("__factoryClass")||(t.__factoryClass=[]),t.__factoryClass.push(function(t){return t?(n||(n={}),n[t]?n[t]:void(n[t]=this)):void 0}),t.addMetrics=function(t,n){var e=this._metrics[t];e||(e=this._metrics[t]={cnt:0,min:n,max:n,total:0}),isNaN(n)||(e.cnt++,e.total+=n,e.max<n&&(e.max=n),e.min>n&&(e.min=n),e.avg=e.total/e.cnt)},t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(t){this._tag=t,this._log=[],this._metrics={};var n=this;e().every(.2,function(){0!=n._log.length&&console.group&&(console.group(n._tag),n._log.forEach(function(t){1==t.length&&console.log(t[0]),2==t.length&&console.log(t[0],t[1]),3==t.length&&console.log(t[0],t[1],t[2]),4==t.length&&console.log(t[0],t[1],t[2],t[3])}),n._log.length=0,console.groupEnd())}),e().every(.2,function(){if(n._logMemoryCnt&&n._logMemoryCnt>0&&(n._logMemoryCnt--,process&&process.memoryUsage)){var t=(require("util"),process.memoryUsage());n.value("rss",t.rss),n.value("heapTotal",t.heapTotal),n.value("heapUsed",t.heapUsed),n.value("heapUsage",parseInt(100*t.heapUsed/t.heapTotal)),n.value("fromTotalGb",parseFloat(100*t.heapTotal/1073741824).toFixed(2))}if(console&&console.group)console.group("Metrics"),console.table(n._metrics,["cnt","min","max","avg"]),console.groupEnd();else{console.log("=== node.js METRICS ===");for(var e in n._metrics){var t=n._metrics[e];console.log(e,t.cnt,t.min,t.max,t.avg)}}})}),t.log=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);this._log.push(t)},t.recordHeap=function(t){this._logMemoryCnt=t},t.value=function(t,n){this.addMetrics(t,n)}}(this)},o=function(t,n,e,i,a,r,l,s){var f,c=this;if(!(c instanceof o))return new o(t,n,e,i,a,r,l,s);var u=[t,n,e,i,a,r,l,s];if(c.__factoryClass)if(c.__factoryClass.forEach(function(t){f=t.apply(c,u)}),"function"==typeof f){if(f._classInfo.name!=o._classInfo.name)return new f(t,n,e,i,a,r,l,s)}else if(f)return f;c.__traitInit?c.__traitInit.forEach(function(t){t.apply(c,u)}):"function"==typeof c.init&&c.init.apply(c,u)};o._classInfo={name:"lokki"},o.prototype=new i,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(t.lokki=o,this.lokki=o):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.lokki=o:this.lokki=o}.call(new Function("return this")()),function(t){t.__traitInit&&!t.hasOwnProperty("__traitInit")&&(t.__traitInit=t.__traitInit.slice()),t.__traitInit||(t.__traitInit=[]),t.__traitInit.push(function(){})}(this)},e=function(t,n,i,o,a,r,l,s){var f,c=this;if(!(c instanceof e))return new e(t,n,i,o,a,r,l,s);var u=[t,n,i,o,a,r,l,s];if(c.__factoryClass)if(c.__factoryClass.forEach(function(t){f=t.apply(c,u)}),"function"==typeof f){if(f._classInfo.name!=e._classInfo.name)return new f(t,n,i,o,a,r,l,s)}else if(f)return f;c.__traitInit?c.__traitInit.forEach(function(t){t.apply(c,u)}):"function"==typeof c.init&&c.init.apply(c,u)};e._classInfo={name:"lokkiLoki"},e.prototype=new n,function(){"undefined"!=typeof define&&null!==define&&null!=define.amd?(t.lokkiLoki=e,this.lokkiLoki=e):"undefined"!=typeof module&&null!==module&&null!=module.exports?module.exports.lokkiLoki=e:this.lokkiLoki=e}.call(new Function("return this")()),"undefined"!=typeof define&&null!==define&&null!=define.amd&&define(t)}).call(new Function("return this")());